#include "charpixel.h"
#include <stdlib.h>

static char printChars[0xff+1] = {
    ' ',
    '.',
    '.',
    '.',
    '.',
    '.',
    '.',
    '.',
    '.',
    '.',
    '.',
    '.',
    '.',
    '.',
    '.',
    '.',


    ',',
    ',',
    ',',
    ',',
    ',',
    ',',
    ',',
    ',',
    ',',
    ',',
    ',',
    ',',
    ',',
    ',',
    ',',
    ',',

    '_',
    '_',
    '_',
    '_',
    '_',
    '_',
    '_',
    '_',
    '_',
    '_',
    '_',
    '_',
    '_',
    '_',
    '_',
    '_',

    '-',
    '-',
    '-',
    '-',
    '-',
    '-',
    '-',
    '-',
    '-',
    '-',
    '-',
    '-',
    '-',
    '-',
    '-',
    '-',


    's',
    's',
    's',
    's',
    's',
    's',
    's',
    's',
    's',
    's',
    's',
    's',
    's',
    's',
    's',
    's',


    'r',
    'r',
    'r',
    'r',
    'r',
    'r',
    'r',
    'r',
    'r',
    'r',
    'r',
    'r',
    'r',
    'r',
    'r',
    'r',

    'g',
    'g',
    'g',
    'g',
    'g',
    'g',
    'g',
    'g',
    'g',
    'g',
    'g',
    'g',
    'g',
    'g',
    'g',
    'g',

    '>',
    '>',
    '>',
    '>',
    '>',
    '>',
    '>',
    '>',
    '>',
    '>',
    '>',
    '>',
    '>',
    '>',
    '>',
    '>',







    '$',
    '$',
    '$',
    '$',
    '$',
    '$',
    '$',
    '$',
    '$',
    '$',
    '$',
    '$',
    '$',
    '$',
    '$',
    '$',


    '%',
    '%',
    '%',
    '%',
    '%',
    '%',
    '%',
    '%',
    '%',
    '%',
    '%',
    '%',
    '%',
    '%',
    '%',
    '%',


    '#',
    '#',
    '#',
    '#',
    '#',
    '#',
    '#',
    '#',
    '#',
    '#',
    '#',
    '#',
    '#',
    '#',
    '#',
    '#',


    '&',
    '&',
    '&',
    '&',
    '&',
    '&',
    '&',
    '&',
    '&',
    '&',
    '&',
    '&',
    '&',
    '&',
    '&',







    'S',
    'S',
    'S',
    'S',
    'S',
    'S',
    'S',
    'S',
    'S',
    'S',
    'S',
    'S',
    'S',
    'S',
    'S',
    'S',



    'R',
    'R',
    'R',
    'R',
    'R',
    'R',
    'R',
    'R',
    'R',
    'R',
    'R',
    'R',
    'R',
    'R',
    'R',
    'R',



    'G',
    'G',
    'G',
    'G',
    'G',
    'G',
    'G',
    'G',
    'G',
    'G',
    'G',
    'G',
    'G',
    'G',
    'G',
    'G',

    '@',
    '@',
    '@',
    '@',
    '@',
    '@',
    '@',
    '@',
    '@',
    '@',
    '@',
    '@',
    '@',
    '@',
    '@',
    '@',
    '@',
};

#define MAX(__a__, __b__) ((__a__) > (__b__) ? (__a__) : (__b__))


char topaz_es2_get_char_from_pixel(uint8_t * rgba) {
    uint8_t out = MAX(MAX(rgba[0], rgba[1]), rgba[2]);
    out *= (1 / 255.0) * rgba[3];
    return printChars[out];
}
